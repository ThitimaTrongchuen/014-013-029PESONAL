if (self.CavalryLogger) { CavalryLogger.start_js_script(document.currentScript); }/*FB_PKG_DELIM*/

__d("MessageRequestsBulkActionsButtons.bs",["fbt","FocusRegion.react","LS.bs","LSOptimisticDeleteThread","LSOptimisticMarkThreadReadV2","LSTransaction.bs","LsMessageRequestsActions.bs","LsMessageRequestsEntryPoint.bs","LsSystemFolder.bs","MessageRequestsBulkActionsContext.react","MessageRequestsLog.bs","ReQL.bs","ServerTime","TetraButtonGroup.react","bs_caml_format","bs_caml_int64","bs_curry","focusScopeQueries","promiseDone","react","useCometConfirmationDialog","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||b("react");function j(a,c){return i.useCallback(function(c){c.forEach(function(c){var d=b("bs_caml_format").caml_int64_of_string(c);b("promiseDone")(b("LSTransaction.bs").run(a,function(c){return b("ReQL.bs").first(b("ReQL.bs").getKeyRange(b("ReQL.bs").fromTableAscending(a.table("threads")),{hd:d,tl:0})).then(function(a){return b("LSOptimisticMarkThreadReadV2")(d,b("bs_caml_int64").of_float(b("ServerTime").getMillis()),b("LS.bs").make(c))})},"readWrite"),void 0,void 0)})},[c,a])}function k(a,c){return i.useCallback(function(c){c.forEach(function(c){var d=b("bs_caml_format").caml_int64_of_string(c);b("promiseDone")(b("LSTransaction.bs").run(a,function(a){return b("LSOptimisticDeleteThread")(d,b("LS.bs").make(a))},"readWrite"),void 0,void 0)})},[c,a])}function a(a){a=a.entryPoint;var c=a!==void 0?a:"messageRequests";a=i.useContext(b("MessageRequestsBulkActionsContext.react"));var d=a.setIsBulkActionsEditMode,e=a.bulkActionsUnreadSelectedThreads,f=a.bulkActionsSelectedThreads,h=b("useReStore")(),l=j(h,f),m=k(h,f),n=b("useCometConfirmationDialog")();h=i.useCallback(function(a){b("bs_curry")._1(l,f);b("bs_curry")._1(d,!1);return b("MessageRequestsLog.bs").logMessageRequestsBulkActionTapped(b("bs_caml_int64").to_int32(b("LsMessageRequestsEntryPoint.bs").settings),f.size,e.size,b("bs_caml_int64").to_int32(b("LsMessageRequestsActions.bs").bulkMarkAsRead),c==="spam"?b("bs_caml_int64").to_int32(b("LsSystemFolder.bs").spam):b("bs_caml_int64").to_int32(b("LsSystemFolder.bs").pending))});var o=i.useCallback(function(a){b("MessageRequestsLog.bs").logMessageRequestsBulkActionTapped(b("bs_caml_int64").to_int32(b("LsMessageRequestsEntryPoint.bs").settings),f.size,e.size,b("bs_caml_int64").to_int32(b("LsMessageRequestsActions.bs").bulkDelete),c==="spam"?b("bs_caml_int64").to_int32(b("LsSystemFolder.bs").spam):b("bs_caml_int64").to_int32(b("LsSystemFolder.bs").pending));return b("bs_curry")._3(n,{body:f.size===1?g._(/*FBT_CALL*/"\u0e01\u0e32\u0e23\u0e14\u0e33\u0e40\u0e19\u0e34\u0e19\u0e01\u0e32\u0e23\u0e19\u0e35\u0e49\u0e08\u0e30\u0e25\u0e1a\u0e02\u0e49\u0e2d\u0e04\u0e27\u0e32\u0e21\u0e19\u0e35\u0e49\u0e2d\u0e22\u0e48\u0e32\u0e07\u0e16\u0e32\u0e27\u0e23 \u0e41\u0e15\u0e48\u0e08\u0e30\u0e44\u0e21\u0e48\u0e41\u0e2a\u0e14\u0e07\u0e27\u0e48\u0e32\u0e04\u0e38\u0e13\u0e2d\u0e48\u0e32\u0e19\u0e2b\u0e23\u0e37\u0e2d\u0e25\u0e1a\u0e02\u0e49\u0e2d\u0e04\u0e27\u0e32\u0e21\u0e41\u0e25\u0e49\u0e27"/*FBT_CALL*/):g._(/*FBT_CALL*/"\u0e01\u0e32\u0e23\u0e14\u0e33\u0e40\u0e19\u0e34\u0e19\u0e01\u0e32\u0e23\u0e19\u0e35\u0e49\u0e08\u0e30\u0e25\u0e1a\u0e02\u0e49\u0e2d\u0e04\u0e27\u0e32\u0e21\u0e40\u0e2b\u0e25\u0e48\u0e32\u0e19\u0e35\u0e49\u0e2d\u0e22\u0e48\u0e32\u0e07\u0e16\u0e32\u0e27\u0e23 \u0e41\u0e15\u0e48\u0e08\u0e30\u0e44\u0e21\u0e48\u0e41\u0e2a\u0e14\u0e07\u0e27\u0e48\u0e32\u0e04\u0e38\u0e13\u0e2d\u0e48\u0e32\u0e19\u0e2b\u0e23\u0e37\u0e2d\u0e25\u0e1a\u0e02\u0e49\u0e2d\u0e04\u0e27\u0e32\u0e21\u0e41\u0e25\u0e49\u0e27"/*FBT_CALL*/),confirm:g._(/*FBT_CALL*/"\u0e25\u0e1a"/*FBT_CALL*/),title:f.size===1?g._(/*FBT_CALL*/"\u0e25\u0e1a\u0e04\u0e33\u0e02\u0e2d\u0e2a\u0e48\u0e07\u0e02\u0e49\u0e2d\u0e04\u0e27\u0e32\u0e21 1 \u0e23\u0e32\u0e22\u0e01\u0e32\u0e23\u0e43\u0e0a\u0e48\u0e44\u0e2b\u0e21"/*FBT_CALL*/):g._(/*FBT_CALL*/"\u0e25\u0e1a\u0e04\u0e33\u0e02\u0e2d\u0e2a\u0e48\u0e07\u0e02\u0e49\u0e2d\u0e04\u0e27\u0e32\u0e21 {Number of selected threads} \u0e23\u0e32\u0e22\u0e01\u0e32\u0e23\u0e43\u0e0a\u0e48\u0e44\u0e2b\u0e21"/*FBT_CALL*/,[g._param("Number of selected threads",String(f.size))])},function(a){b("bs_curry")._1(m,f);b("bs_curry")._1(d,!1);b("FocusRegion.react").focusRegionById("mwb-jewel-bulk-actions-edit-button",b("focusScopeQueries").tabbableScopeQuery);return b("MessageRequestsLog.bs").logMessageRequestsBulkActionConfirmed(b("bs_caml_int64").to_int32(b("LsMessageRequestsEntryPoint.bs").settings),f.size,e.size,b("bs_caml_int64").to_int32(b("LsMessageRequestsActions.bs").bulkDelete),c==="spam"?b("bs_caml_int64").to_int32(b("LsSystemFolder.bs").spam):b("bs_caml_int64").to_int32(b("LsSystemFolder.bs").pending))},function(a){})});return i.jsx("div",{className:a.isBulkActionsEditMode?"usczdcwk f10w8fjw":"mkhogb32",id:c==="spam"?"spam-bulk-actions-buttons":"message-requests-bulk-actions-buttons",children:i.jsx(b("FocusRegion.react").FocusRegion,{autoFocusQuery:b("focusScopeQueries").tabbableScopeQuery,autoRestoreFocus:!0,children:i.jsx(b("TetraButtonGroup.react"),{primary:{label:g._(/*FBT_CALL*/"\u0e17\u0e33\u0e40\u0e04\u0e23\u0e37\u0e48\u0e2d\u0e07\u0e2b\u0e21\u0e32\u0e22\u0e40\u0e1b\u0e47\u0e19\u0e2d\u0e48\u0e32\u0e19\u0e41\u0e25\u0e49\u0e27"/*FBT_CALL*/).toString(),type:"secondary",onPress:h,testid:c==="spam"?"spam-bulk-mark-as-read-button":"message-requests-bulk-mark-as-read-button",disabled:f.size===0||e.size===0},secondary:{label:g._(/*FBT_CALL*/"\u0e25\u0e1a"/*FBT_CALL*/),onPress:o,disabled:f.size===0,testid:c==="spam"?"spam-bulk-delete-button":"message-requests-bulk-delete-button"},direction:"forward",align:"justify"})})})}c=a;f.make=c}),null);
__d("MessageRequestsBulkActionsContextProvider.react",["MessageRequestsBulkActionsContext.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");b=d("react");var i=b.useEffect,j=b.useMemo,k=b.useState;function a(a){a=a.children;var b=k(!1),d=b[0],e=b[1];b=k(new Set());var f=b[0],g=b[1];b=k(new Set());var l=b[0],m=b[1];i(function(){g(function(){return new Set()}),m(function(){return new Set()})},[d,g,m]);b=j(function(){return{bulkActionsSelectedThreads:f,bulkActionsUnreadSelectedThreads:l,isBulkActionsEditMode:d,setBulkActionsSelectedThreads:g,setBulkActionsUnreadSelectedThreads:m,setIsBulkActionsEditMode:e}},[f,d,l]);return h.jsx(c("MessageRequestsBulkActionsContext.react").Provider,{value:b,children:a})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MessengerThreadlistFooterOpenInAppLink.bs",["fbt","ix","Actor.re","CometPressable.react","MDSRow.react","MDSRowItem.react","MWText.react","MessengerDesktopDeeplinkEventFalcoEvent","TetraIcon.react","XMessengerDotComDesktopLaunchAppInterstitialControllerRouteBuilder","bs_caml_option","fbicon","react","stylex","uuid"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=i||b("react"),l={root:{boxShadow:"usczdcwk",minHeight:"iihba337",":hover":{textDecoration:"p8dawk7l"},paddingTop:"jb3vyjys",paddingEnd:"gl4o1x5y",paddingBottom:"qt6c0cv9",paddingStart:"lt9micmv","@media (max-width: 900px)":{width:"g0mhvs5p"}},button:{display:"j83agx80",justifyContent:"taijpn5t",alignItems:"bp9cbjyn"},icon:{marginEnd:"fv0vnmcu"},content:{"@media (max-width: 900px)":{display:"ahb00how"}}};function a(a){a=b("Actor.re").useActor();var c=k.useRef(!1),d=k.useRef(b("uuid")()).current;k.useEffect(function(){c.current||(c.current=!0,b("MessengerDesktopDeeplinkEventFalcoEvent").log(function(a){return{event:"messenger_threadlist_open_in_app_impression",eventLocation:"browser",eventType:"thread",funnelSessionId:d,mobile_app_source:"unknown"}}))});a=b("XMessengerDotComDesktopLaunchAppInterstitialControllerRouteBuilder").buildUri({funnel_session_id:d,id:b("bs_caml_option").some(a[0]),thread:void 0,origin:"MSG"}).setDomain("www.messenger.com").setProtocol("https").toString();var e=k.useCallback(function(a){b("MessengerDesktopDeeplinkEventFalcoEvent").log(function(a){return{event:"messenger_threadlist_open_in_app_click",eventLocation:"browser",eventType:"thread",funnelSessionId:d,mobile_app_source:"unknown"}})},[]),f=g._(/*FBT_CALL*/"\u0e40\u0e1b\u0e34\u0e14\u0e41\u0e2d\u0e1e Messenger"/*FBT_CALL*/);return k.jsx(b("MDSRow.react"),{paddingHorizontal:8,paddingVertical:8,verticalAlign:"center",expanding:!0,spacing:0,xstyle:[l.root],children:k.jsx(b("MDSRowItem.react"),{expanding:!0,children:k.jsx(b("CometPressable.react"),{"aria-label":f,expanding:!0,linkProps:{target:"_blank",url:a},onPress:e,overlayOffset:10,overlayRadius:6,children:k.jsxs("div",{className:(j||(j=b("stylex")))(l.button),children:[k.jsx("span",{className:j(l.icon),children:k.jsx(b("TetraIcon.react"),{icon:b("fbicon")._(h("505620"),20),color:"primary"})}),k.jsx("span",{className:j(l.content),children:k.jsx(b("MWText.react"),{align:"center",type:"bodyLink3",children:f.toString()})})]})})})})}c=a;f.styles=l;f.make=c}),null);
__d("MWInboxLeftRailHeader.bs",["cr:1774123"],(function(a,b,c,d,e,f){"use strict";a=b("cr:1774123").make;f.$MWMDSInboxLeftRailHeader$OR$MWTetraInboxLeftRailHeader$requireCond=b("cr:1774123");f.make=a}),null);
__d("MWInboxLeftRail.bs",["fbt","BootloaderResource","CometErrorBoundary.re","CometPagelet.react","CometPlaceholder.react","CometRouteParams","CometScrollView.react","CometTransientDialogProvider.react","JSResource","LS.bs","LSClearMessageSearchTable","LSClearTables","LSIssueMessageSearchQuery","LSMessageSearchType.bs","LSTransaction.bs","Locale","LsSystemFolder.bs","MAWUnsupportedBrowsersNuxWrapper.react","MWChatContactsContainer.react","MWInboxActiveNowTrayContainer.bs","MWInboxLeftRailContentPlaceholder.react","MWInboxLeftRailHeader.bs","MWInboxLeftRailSearch.bs","MWInboxMessageRequestsRoot.bs","MWInboxNavigationHeaderWithBackButton.bs","MWInboxSelectedThread.bs","MWLSJewelLoadMoreThreads.bs","MWLeftRailComponent.react","MWMessageSearchResults.bs","MWPActor.bs","MWQuickPromotionThreadlistBannerContainer.react","MWRestrictedAccountsList.bs","MWText.react","MWThreadList.bs","MWThreadListNewMessage.bs","MWThreadListNewMessageState.bs","MessageRequestsBulkActionsContext.react","MessengerThreadlistFooterDesktopAppLink.bs","MessengerThreadlistFooterOpenInAppLink.bs","MessengerWebEntryPoint","Promise","bs_belt_Option","bs_caml","bs_caml_option","bs_curry","bs_int64","cr:1047","cr:3309","cr:3310","cr:3447","cr:3481","cr:4097","gkx","promiseDone","react","recoverableViolation","requestAnimationFrame","stylex","useCurrentRoute","useDebounced","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||b("react"),k=b("Locale").isRTL();e=b("cr:3481")==null?void 0:b("bs_caml_option").some(b("cr:3481"));var l={header:{"@media (max-width: 900px)":{display:"ahb00how"}},page:{position:"pmk7jnqg",opacity:"b5wmifdl",transitionDuration:"ms05siws",transitionProperty:"pnx7fd3z",transitionTimingFunction:"b7h9ocf4",width:"k4urcfbm",height:"datstx6m",display:"j83agx80"},pageHidden:{visibility:"kr9hpln1"},pageVisible:{opacity:"pedkr2u6"},root:{backgroundColor:"hybvsw6c",borderEnd:"hop1g133",outline:"lzcic4wl",overflowX:"ni8dbmo4",overflowY:"stjgntxs",position:"l9j0dhe7",width:"k4urcfbm",height:"datstx6m",minHeight:"dp1hu0rb"},rootWithAnimations:{transform:"h3qk65th",transitionDuration:"ms05siws",transitionProperty:"s48hqc9n",transitionTimingFunction:"b7h9ocf4"},infoBox:{marginTop:"qjjbsfad",marginEnd:"cxmmr5t8",marginBottom:"w0hvl6rk",marginStart:"hcukyx3x",paddingTop:"pybr56ya",paddingEnd:"oj5qckz4",paddingBottom:"f10w8fjw",paddingStart:"lb8aey2d"},messageRequestsContainer:{display:"j83agx80",flexDirection:"cbu4d94t",maxWidth:"d2edcug0"},messageRequestsBulkActionsButtons:{boxShadow:"usczdcwk"}},m=b("cr:4097")==null?void 0:b("bs_caml_option").some(b("cr:4097"));function n(a){var c=a.hidePage,d=a.info,e=a.parentThreadKey,f=a.title;a=a.entryPoint;var g=b("MWInboxSelectedThread.bs").useHook(void 0),h=j.useContext(b("MessageRequestsBulkActionsContext.react")),k=h.setIsBulkActionsEditMode;j.useEffect(function(){b("bs_curry")._1(k,!1)},[c]);h={parentThreadKey:e,onOpenMessageRequests:void 0,threadListMessagingEntrypoint:b("MessengerWebEntryPoint").INBOX,responsive:!0,lsEntryPoint:a,gridLabel:f};g!==void 0&&(h.selectedThreadKey=g);return j.jsxs(b("CometScrollView.react"),{showsHorizontalScrollIndicator:!1,showsVerticalScrollIndicator:!0,children:[j.jsx(b("MWInboxNavigationHeaderWithBackButton.bs").make,{title:f,onReturn:c,entryPoint:a}),d!==void 0?j.jsx("div",{className:(i||(i=b("stylex")))(l.infoBox),children:j.jsx(b("MWText.react"),{color:"secondary",type:"body4",children:b("bs_caml_option").valFromOption(d)})}):null,j.jsx(b("MWThreadList.bs").make,h)]})}var o={make:n};function p(a){a=a.hidePage;return j.jsx(n,{hidePage:a,parentThreadKey:b("LsSystemFolder.bs").mplace,title:g._(/*FBT_CALL*/"Marketplace"/*FBT_CALL*/),entryPoint:"inboxFolder"})}var q={make:p};function r(a){a=a.hidePage;return j.jsx(n,{hidePage:a,parentThreadKey:b("LsSystemFolder.bs").jobs,title:g._(/*FBT_CALL*/"\u0e07\u0e32\u0e19"/*FBT_CALL*/),entryPoint:"inboxFolder"})}var s={make:r},t=b("JSResource")("MAWRequestAndSpamThreadListPage.bs").__setRef("MWInboxLeftRail.bs");function a(a,c,d,e,f){f={parentThreadKey:c,entryPoint:d};a!==void 0&&(f.hidePage=b("bs_caml_option").valFromOption(a));e!==void 0&&(f.showBackButton=b("bs_caml_option").valFromOption(e));return f}function c(a){return j.createElement(b("BootloaderResource").read(t).make,a)}a={reasonResource:t,makeProps:a,make:c};function u(a){a=a.hidePage;return j.jsx(b("MWInboxMessageRequestsRoot.bs").make,{hidePage:a})}c={make:u};function v(a){a=a.hidePage;var c=b("MWInboxSelectedThread.bs").useHook(void 0);return j.jsx(b("MWRestrictedAccountsList.bs").make,{hidePage:a,onClose:function(a){},selectedThreadKey:c})}var w={make:v};function x(a){a=a.hidePage;return j.jsx(n,{hidePage:a,parentThreadKey:b("LsSystemFolder.bs").archived,title:g._(/*FBT_CALL*/"\u0e41\u0e0a\u0e17\u0e17\u0e35\u0e48\u0e08\u0e31\u0e14\u0e40\u0e01\u0e47\u0e1a"/*FBT_CALL*/),entryPoint:"inboxArchived"})}var y={make:x};function z(a){a=a.hidePage;var c=b("MWInboxSelectedThread.bs").useHook(void 0),d={preventLocalNavigation:!1,showCount:!0,entryPoint:"inboxActiveContacts"};c=b("bs_belt_Option").map(c,b("bs_int64").to_string);c!==void 0&&(d.selectedThreadKey=c);return j.jsxs(b("CometScrollView.react"),{showsHorizontalScrollIndicator:!1,showsVerticalScrollIndicator:!0,children:[j.jsx(b("MWInboxNavigationHeaderWithBackButton.bs").make,{title:g._(/*FBT_CALL*/"\u0e1c\u0e39\u0e49\u0e04\u0e19"/*FBT_CALL*/),onReturn:a}),j.jsx(b("MWChatContactsContainer.react"),d)]})}var A={make:z};function B(a){var c=a.hidePage,d=a.query;a=a.setIsConversationSearchVisible;var e=b("useReStore")(),f=b("MWInboxSelectedThread.bs").useHook(void 0),g=j.useRef(!1),h=j.useCallback(function(a){if(!g.current){g.current=!0;b("promiseDone")(b("LSTransaction.bs").run(e,function(a){var c=b("LS.bs").make(a);return b("LSClearMessageSearchTable")(b("LSMessageSearchType.bs").message,c).then(function(a){return b("LSClearMessageSearchTable")(b("LSMessageSearchType.bs").thread,c)})},"readWrite"),c);return}},[e,c]);return j.jsx(b("MWMessageSearchResults.bs").make,{query:d,clearSearchResultsAndHidePage:h,selectedThreadKey:f,setIsConversationSearchVisible:a})}var C={make:B},D={},E=b("cr:3447")==null?function(a){}:b("cr:3447").useHook;function d(a){var c=a.setIsConversationSearchVisible,d=a.queries,e=b("MWPActor.bs").useActor(void 0),f=b("MWLSJewelLoadMoreThreads.bs").useHook(b("LsSystemFolder.bs").archived),h=b("MWInboxSelectedThread.bs").useHook(void 0);a=j.useState(function(){return!1});var n=a[1],o=a[0];a=j.useState(function(){return[]});var q=a[1];a=a[0];var s=j.useState(function(){return 0}),t=s[1],w=s[0];s=j.useCallback(function(a){return b("bs_curry")._1(n,function(a){return!1})},[]);var y=b("useReStore")(),A=b("useDebounced")(j.useCallback(function(a){b("requestAnimationFrame")(function(c){b("bs_curry")._1(n,function(a){return!0});return b("bs_curry")._1(t,function(c){b("bs_curry")._1(q,function(b){return b.slice(0,c).concat([a])});return c+1|0})})},[n,t,q]),350,!0),C=j.useCallback(function(a){b("requestAnimationFrame")(function(a){if(w<1){b("recoverableViolation")("Attempting to close a page that does not exist anymore.","messenger_comet");return}else{b("bs_curry")._1(n,function(a){return!0});return b("bs_curry")._1(t,function(a){return a-1|0})}})},[a,w,n,t]),D=j.useCallback(function(a){return b("bs_curry")._1(A,u)},[A]),F=j.useCallback(function(a){return b("bs_curry")._1(A,v)},[A]),G=j.useCallback(function(a){if(b("bs_caml").i64_eq(a,b("LsSystemFolder.bs").jobs))return b("bs_curry")._1(A,r);else if(b("bs_caml").i64_eq(a,b("LsSystemFolder.bs").mplace))return b("bs_curry")._1(A,p);else{b("recoverableViolation")("Attempted to show an unimplemented nested system folder","messenger_web_product");return}},[A]),H=j.useCallback(function(a){f();return b("bs_curry")._1(A,x)},[f,A]),I=j.useCallback(function(a){return b("bs_curry")._1(A,z)},[A]),J=b("bs_curry")._1(E,A),K=j.useCallback(function(a){b("promiseDone")(b("LSTransaction.bs").run(y,function(c){var d=b("LS.bs").make(c);return b("LSClearTables")(d).then(function(c){return b("LSIssueMessageSearchQuery")(a,b("LSMessageSearchType.bs").thread,void 0,void 0,d)})},"readWrite").then(function(c){if(b("cr:1047")==null)return b("Promise").resolve(void 0);else return b("bs_curry")._3(b("cr:1047").searchSecureDatabaseThreads,a,e,y)}),function(d){b("bs_curry")._1(A,function(b){return B({hidePage:b.hidePage,query:a,setIsConversationSearchVisible:c})});return b("bs_curry")._1(c,function(a){return!0})},function(a){b("recoverableViolation")("Error performing search","messenger_web_product",{error:a.Error})})},[y,h,A,c,e]);j.useEffect(function(){return function(a){b("promiseDone")(b("LSTransaction.bs").run(y,function(a){return b("LSClearMessageSearchTable")(b("LSMessageSearchType.bs").thread,b("LS.bs").make(a))},"readWrite"),void 0,void 0)}},[y]);var L=j.useContext(b("MWThreadListNewMessageState.bs").context),M=L.isActive?j.jsx(b("MWThreadListNewMessage.bs").make,{entries:L.entries}):null;L=j.useMemo(function(){return j.jsx(b("MWInboxLeftRailHeader.bs").make,{xstyle:b("bs_caml_option").some(l.header),showMessageRequests:D,showHidden:H,showActiveContacts:I,showRestrictedAccounts:F})},[D,H,I,F]);var N=b("CometRouteParams").useRouteParams(),O=N.folder_id;N=j.useState(function(){if(O==null)return b("LsSystemFolder.bs").inbox;else return b("LsSystemFolder.bs").community});var P=N[1],Q=N[0],R=b("cr:3309")==null?null:j.jsx(b("cr:3309").make,{entryPoint:b("MessengerWebEntryPoint").INBOX,onTabChange:function(a){return b("bs_curry")._1(P,function(b){return a})},selectedFolderTab:Q,xstyle:b("cr:3309").xstyle.inboxTabContainer});N=j.useMemo(function(){var a={searchMessagesClicked:K,testid:"mw-search-bar"},c=J!==void 0?function(a){b("bs_curry")._1(J,a)}:void 0;c!==void 0&&(a.onSelectFreeformQuery=b("bs_caml_option").valFromOption(c));return j.jsxs(j.Fragment,{children:[j.jsx(b("MWInboxLeftRailSearch.bs").make,a),R,j.jsx(b("CometPlaceholder.react"),{children:j.jsx(b("CometErrorBoundary.re").make,{fallback:function(a){return null},children:j.jsx(b("MAWUnsupportedBrowsersNuxWrapper.react"),{children:j.jsx(b("MWQuickPromotionThreadlistBannerContainer.react"),{})})}),fallback:null})]})},[K,Q,J]);var S=j.useCallback(function(a){},[]),T=g._(/*FBT_CALL*/"\u0e41\u0e0a\u0e17"/*FBT_CALL*/),U=j.useMemo(function(){var a=d.actionNowTrayQueryRef,c,e=0;if(b("cr:3310")==null||!b("bs_caml").i64_eq(Q,b("LsSystemFolder.bs").community))e=1;else{var f={gridLabel:T,lsEntryPoint:"inboxThreadList",messagingEntrypoint:b("MessengerWebEntryPoint").INBOX,responsive:!0};h!==void 0&&(f.selectedThreadKey=h);c=j.jsx(b("cr:3310").make,f)}if(e===1){f={parentThreadKey:Q,onOpenMessageRequests:void 0,threadListMessagingEntrypoint:b("MessengerWebEntryPoint").INBOX,onClose:S,responsive:!0,preamble:M,lsEntryPoint:"inboxThreadList",onClickNestedFolderThread:G,gridLabel:T};h!==void 0&&(f.selectedThreadKey=h);c=j.jsx(b("MWThreadList.bs").make,f)}return j.jsxs(b("CometPagelet.react").Placeholder,{fallback:j.jsx(b("MWInboxLeftRailContentPlaceholder.react"),{}),name:"MWThreadList",children:[a!==void 0?j.jsx(b("MWInboxActiveNowTrayContainer.bs").make,{actionNowTrayQueryRef:b("bs_caml_option").valFromOption(a)}):null,c]})},[M,h,G,Q]);L=j.jsxs(j.Fragment,{children:[j.jsx("div",{style:{transform:"translateX("+(String(Math.imul(k?1:-1,w))+"00%) translateZ(1px)")},className:(i||(i=b("stylex")))(l.page,!o&&w!==0?l.pageHidden:!1,w===0?l.pageVisible:!1),children:j.jsx(b("MWLeftRailComponent.react"),{footer:b("gkx")("1817606")?j.createElement(b("MessengerThreadlistFooterDesktopAppLink.bs").make,{}):b("gkx")("1732")?j.createElement(b("MessengerThreadlistFooterOpenInAppLink.bs").make,{}):null,header:L,primaryNav:U,search:N,preamble:b("cr:3481")==null?null:j.jsx(b("cr:3481").make,{})})}),a.map(function(a,c){return j.jsx("div",{style:{transform:"translateX("+(String(Math.imul(k?1:-1,(w-c|0)-1|0))+"00%) translateZ(1px)")},className:(i||(i=b("stylex")))(l.page,!o&&w!==(c+1|0)?l.pageHidden:!1,w===(c+1|0)?l.pageVisible:!1),children:j.createElement(a,{hidePage:C,pushPage:A})},String(c))})]});var V=b("useCurrentRoute")();j.useEffect(function(){!(V==null)&&(V.url==="/messages/requests"||V.url==="/messages/filtered")&&b("bs_curry")._1(D,void 0)},[V]);return j.jsx(b("CometTransientDialogProvider.react"),{children:j.jsx("div",{className:i(l.root,o?l.rootWithAnimations:!1),onTransitionEnd:s,children:b("cr:4097")==null?L:j.jsx(m.make,{children:L,activeIndex:w})})})}var F=b("cr:1047"),G=b("cr:3309"),H=b("cr:3310");d=d;f.$MWEncryptedBackupsThreadListNux$requireCond=b("cr:3481");f.mwEncryptedBackupsThreadListNux=e;f.styles=l;f.$MWThreadListKeyCommandContext$OR$null$requireCond=b("cr:4097");f.$MWInboxSecureContentSearch$requireCond=b("cr:1047");f.mWInboxSecureContentSearch=F;f.$MWInboxContextSwitcher$requireCond=b("cr:3309");f.mWInboxContextSwitcher=G;f.$MWCMBlendedThreadList$requireCond=b("cr:3310");f.mWCMBlendedThreadList=H;f.ThreadListPage=o;f.Marketplace=q;f.Jobs=s;f.LazyMAWRequestAndSpamThreadListPage=a;f.MessageRequests=c;f.RestrictedAccounts=w;f.Hidden=y;f.ActiveContacts=A;f.ThreadSearchResults=C;f.MWInboxLeftRailContentPlaceholder=D;f.$UseMWLeftRailFullSearch$OR$null$requireCond=b("cr:3447");f.useMWLeftRailFullSearch=E;f.make=d}),null);
__d("MWSetupPresenceReportingDeferred.bs",["MWSetupPresenceReportingDeferred.react"],(function(a,b,c,d,e,f){"use strict";a=b("MWSetupPresenceReportingDeferred.react");f.make=a}),null);
__d("MWInboxRoot.bs",["fbt","BaseHeadingContext","BaseRow.react","BaseRowItem.react","CometLeftRailLayoutContext","CometLeftRailPrimaryContext","CometPlaceholder.react","CometRouterFocusRegion.react","CurrentEnvironment","FBID.bs","LS.bs","LSClearMessageSearchTable","LSMessageSearchType.bs","LSTransaction.bs","MWInboxLeftRail.bs","MWInboxMaster.bs","MWInboxMasterView.bs","MWPActor.bs","MWSetupPresenceReportingDeferred.bs","MWThreadListNewMessageState.bs","MWUseGlobalMuteUntil.bs","MWVisibleMessageContext.bs","ReQL.bs","ReQLSubscription.bs","bs_belt_Option","bs_caml_int64","bs_caml_obj","bs_caml_option","bs_curry","bs_int64","cr:557","gkx","promiseDone","react","stylex","usePrevious","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||b("react");c={};d={Provider:c};e={};c={Provider:e};var k={container:{display:"j83agx80",flexGrow:"buofh1pr",minHeight:"dp1hu0rb",position:"l9j0dhe7",zIndex:"du4w35lb"},contentArea:{display:"j83agx80",flexDirection:"cbu4d94t",flexGrow:"buofh1pr",minHeight:"dp1hu0rb",minWidth:"hpfvmrgz",position:"l9j0dhe7",zIndex:"du4w35lb"},leftRail:{flexShrink:"pfnyh3mw",minHeight:"dp1hu0rb",overflowAnchor:"rek2kq2y",width:"o36gj0jk",zIndex:"tkr6xdv7","@media (max-width: 900px)":{width:"g0mhvs5p"}},leftRailForMessengerDotCom:{"@media (max-width: 900px)":{width:"ezfq3ill"}},mainContent:{display:"j83agx80",minHeight:"dp1hu0rb"}};function l(a){var c=a.isConversationSearchVisible,d=a.setIsConversationSearchVisible;a=j.useState(function(){});var e=a[1],f=a[0];a=j.useMemo(function(){return{setVisibleMessage:e,visibleMessage:f}},[f,e]);var g=b("MWInboxMasterView.bs").useHook(void 0),h=b("usePrevious")(g),l=h==null?void 0:b("bs_caml_option").some(h),m=b("useReStore")(),n=b("bs_belt_Option").isSome(b("ReQLSubscription.bs").useFirst(j.useMemo(function(){return b("ReQL.bs").getKeyRange(b("ReQL.bs").fromTableAscending(m.table("message_search_queries")),{hd:b("LSMessageSearchType.bs").thread,tl:0})},[m])));j.useEffect(function(){!n&&b("bs_caml_obj").caml_notequal(g,l)&&(b("bs_curry")._1(d,function(a){return!1}),b("promiseDone")(b("LSTransaction.bs").run(m,function(a){return b("LSClearMessageSearchTable")(b("LSMessageSearchType.bs").message,b("LS.bs").make(a))},"readWrite"),void 0,void 0))},[g,n,m,d,l]);var o=b("MWPActor.bs").useActor(void 0),p=b("MWUseGlobalMuteUntil.bs").useGlobalMuteUntil(void 0);j.useEffect(function(){!(b("cr:557")==null)&&b("CurrentEnvironment").messengerdotcom&&b("bs_curry")._2(b("cr:557").updateMute,b("FBID.bs").ofStringExn(b("bs_int64").to_string(o)),b("bs_caml_int64").to_float(p))},[o,JSON.stringify(p)]);h=j.useContext(b("BaseHeadingContext"));return j.jsx("div",{className:(i||(i=b("stylex")))(k.contentArea),children:j.jsx(b("CometRouterFocusRegion.react"),{children:j.jsx(b("CometLeftRailLayoutContext").Provider,{value:!0,children:j.jsx(b("MWVisibleMessageContext.bs").Provider.make,{value:a,children:j.createElement(b("BaseHeadingContext").Provider,{value:h+1|0,children:j.jsx(j.Fragment,{children:j.jsx(b("MWInboxMaster.bs").make,{isConversationSearchVisible:c,setIsConversationSearchVisible:d})})})})})})})}e={make:l};function a(a){a=a.queries;var c=j.useState(function(){return!1}),d=c[1],e=b("MWInboxMasterView.bs").useHook(void 0),f;if(typeof e==="number")f="";else{e=e._0;f=e===0?g._(/*FBT_CALL*/"\u0e02\u0e49\u0e2d\u0e04\u0e27\u0e32\u0e21\u0e43\u0e2b\u0e21\u0e48"/*FBT_CALL*/):""}e=j.jsx(b("MWThreadListNewMessageState.bs").Provider.make,{children:j.jsx(j.Fragment,{children:j.jsx(b("BaseRow.react"),{align:"start",children:j.jsxs(b("CometLeftRailPrimaryContext").Provider,{value:!1,children:[j.jsx(b("BaseRowItem.react"),{"aria-label":"",children:j.jsx(b("MWInboxLeftRail.bs").make,{setIsConversationSearchVisible:d,queries:a}),role:"navigation",xstyle:[k.leftRail,b("CurrentEnvironment").messengerdotcom&&b("gkx")("571")?k.leftRailForMessengerDotCom:!1]}),j.jsx(b("BaseRowItem.react"),{"aria-label":f,expanding:!0,children:j.jsx(b("CometPlaceholder.react"),{children:j.jsx(l,{isConversationSearchVisible:c[0],setIsConversationSearchVisible:d}),fallback:null}),role:"main",xstyle:[k.mainContent]})]}),xstyle:[k.container]})})});return j.jsxs(j.Fragment,{children:[j.jsx(b("MWSetupPresenceReportingDeferred.bs").make,{}),e]})}a=a;f.CometLeftRailPrimaryContext=d;f.CometLeftRailLayoutContext=c;f.styles=k;f.$MessengerNotificationsWriter$requireCond=b("cr:557");f.Content=e;f.make=a}),null);
__d("MWInboxRoot.re",["MWInboxRoot.bs"],(function(a,b,c,d,e,f){a=b("MWInboxRoot.bs").Content.make;f.Content_make=a;c=b("MWInboxRoot.bs").make;f.make=c;d=b("MWInboxRoot.bs").Content;f.Content=d}),null);
__d("LSPlatformClientProviderWithDeferredLoadingStrategy.bs",["LSPlatformClientProvider.bs","bs_caml_option","react","requireDeferred"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react"),i=b("requireDeferred")("LSPlatformClient.bs").__setRef("LSPlatformClientProviderWithDeferredLoadingStrategy.bs");function j(a){return i.load()}function a(a){var c=a.children,d=a.cleanup;a=a.placeholder;d=d!==void 0?d:!1;a=a!==void 0?b("bs_caml_option").valFromOption(a):null;return h.jsx(b("LSPlatformClientProvider.bs").make,{children:c,cleanup:d,loadLSPlatformClient:j,placeholder:a})}c=a;f.$LSPlatformClient$Deferred=i;f.loadLSPlatformClient=j;f.make=c}),null);
__d("LSPlatformClientProviderWithDeferredLoadingStrategy.re",["LSPlatformClientProviderWithDeferredLoadingStrategy.bs"],(function(a,b,c,d,e,f){a=b("LSPlatformClientProviderWithDeferredLoadingStrategy.bs").make;f.make=a}),null);
__d("MWLSInbox.react",["CometErrorBoundary.react","LSPlatformClientProviderWithDeferredLoadingStrategy.re","LSPlatformConfig.re","LSPlatformMessengerConfig.re","MWInbox.re","MWInboxPlaceholder.react","MWInboxRoot.re","cr:1619","deferredLoadComponent","react","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i=c("deferredLoadComponent")(c("requireDeferred")("MWInboxUncaughtError.react").__setRef("MWLSInbox.react")),j=function(){return h.jsx(i,{})};function a(a){var e,f=a.props.routeProps;a=a.queries;return h.jsxs(h.Fragment,{children:[h.jsx(c("CometErrorBoundary.react"),{fallback:j,children:h.jsx(d("LSPlatformConfig.re").Provider_make,{config:d("LSPlatformMessengerConfig.re").configEagerlyLoaded,children:h.jsx(d("LSPlatformClientProviderWithDeferredLoadingStrategy.re").make,{placeholder:h.jsx(d("MWInboxPlaceholder.react").MWInboxPlaceholder,{}),children:h.jsx(d("MWInbox.re").make,{queries:a,refParam:(e=f.ref_param)!=null?e:void 0,threadKey:(e=f.thread_key)!=null?e:void 0,children:h.jsx(d("MWInboxRoot.re").make,{queries:a})})})})}),h.jsx(c("CometErrorBoundary.react"),{children:b("cr:1619")?h.jsx(b("cr:1619"),{}):null})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);